{"ast":null,"code":"'use strict';\n\nvar asap = require('asap/raw');\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nmodule.exports = Promise;\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._40 = 0;\n  this._65 = 0;\n  this._55 = null;\n  this._72 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._37 = null;\nPromise._87 = null;\nPromise._61 = noop;\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._65 === 3) {\n    self = self._55;\n  }\n  if (Promise._37) {\n    Promise._37(self);\n  }\n  if (self._65 === 0) {\n    if (self._40 === 0) {\n      self._40 = 1;\n      self._72 = deferred;\n      return;\n    }\n    if (self._40 === 1) {\n      self._40 = 2;\n      self._72 = [self._72, deferred];\n      return;\n    }\n    self._72.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\nfunction handleResolved(self, deferred) {\n  asap(function () {\n    var cb = self._65 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._65 === 1) {\n        resolve(deferred.promise, self._55);\n      } else {\n        reject(deferred.promise, self._55);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._55);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(self, new TypeError('A promise cannot be resolved with itself.'));\n  }\n  if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (then === self.then && newValue instanceof Promise) {\n      self._65 = 3;\n      self._55 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._65 = 1;\n  self._55 = newValue;\n  finale(self);\n}\nfunction reject(self, newValue) {\n  self._65 = 2;\n  self._55 = newValue;\n  if (Promise._87) {\n    Promise._87(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._40 === 1) {\n    handle(self, self._72);\n    self._72 = null;\n  }\n  if (self._40 === 2) {\n    for (var i = 0; i < self._72.length; i++) {\n      handle(self, self._72[i]);\n    }\n    self._72 = null;\n  }\n}\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}","map":{"version":3,"names":["asap","require","noop","LAST_ERROR","IS_ERROR","getThen","obj","then","ex","tryCallOne","fn","a","tryCallTwo","b","module","exports","Promise","TypeError","_40","_65","_55","_72","doResolve","_37","_87","_61","prototype","onFulfilled","onRejected","constructor","safeThen","res","handle","Handler","self","resolve","reject","deferred","push","handleResolved","cb","promise","ret","newValue","finale","bind","i","length","done","value","reason"],"sources":["/workspace/smartBrain/smartBrain/node_modules/promise/lib/core.js"],"sourcesContent":["'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._40 = 0;\n  this._65 = 0;\n  this._55 = null;\n  this._72 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._37 = null;\nPromise._87 = null;\nPromise._61 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._65 === 3) {\n    self = self._55;\n  }\n  if (Promise._37) {\n    Promise._37(self);\n  }\n  if (self._65 === 0) {\n    if (self._40 === 0) {\n      self._40 = 1;\n      self._72 = deferred;\n      return;\n    }\n    if (self._40 === 1) {\n      self._40 = 2;\n      self._72 = [self._72, deferred];\n      return;\n    }\n    self._72.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._65 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._65 === 1) {\n        resolve(deferred.promise, self._55);\n      } else {\n        reject(deferred.promise, self._55);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._55);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._65 = 3;\n      self._55 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._65 = 1;\n  self._55 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._65 = 2;\n  self._55 = newValue;\n  if (Promise._87) {\n    Promise._87(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._40 === 1) {\n    handle(self, self._72);\n    self._72 = null;\n  }\n  if (self._40 === 2) {\n    for (var i = 0; i < self._72.length; i++) {\n      handle(self, self._72[i]);\n    }\n    self._72 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}