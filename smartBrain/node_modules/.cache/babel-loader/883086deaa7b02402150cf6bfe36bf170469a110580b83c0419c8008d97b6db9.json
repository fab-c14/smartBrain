{"ast":null,"code":"'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\nvar Promise = require('./core.js');\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._65 = 1;\n  p._55 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._65 === 3) {\n            val = val._55;\n          }\n          if (val._65 === 1) return res(i, val._55);\n          if (val._65 === 2) reject(val._55);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function (value) {\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};","map":{"version":3,"names":["Promise","require","module","exports","TRUE","valuePromise","FALSE","NULL","UNDEFINED","undefined","ZERO","EMPTYSTRING","value","p","_61","_65","_55","resolve","then","bind","ex","reject","all","arr","args","Array","prototype","slice","call","length","remaining","res","i","val","race","values","forEach","onRejected"],"sources":["/workspace/smartBrain/smartBrain/node_modules/promise/lib/es6-extensions.js"],"sourcesContent":["'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._65 = 1;\n  p._55 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._65 === 3) {\n            val = val._55;\n          }\n          if (val._65 === 1) return res(i, val._55);\n          if (val._65 === 2) reject(val._55);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}